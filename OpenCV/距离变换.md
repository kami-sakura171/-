#### **概述**

距离变换是二值图像处理与操作中常用手段，在骨架提取，图像窄化中常有应用。距离

变换的结果是得到一张与输入图像类似的灰度图像，但是灰度值只出现在前景区域。并

且越远离背景边缘的像素灰度值越大。

距离变换的定义是计算一个图像中非零像素点到最近的零像素点的距离，也就是到零像素点的最短距离。

距离变换的处理图像通常都是二值图像，而二值图像其实就是把图像分为两部分，即背景和物体两部分，物体通常又称为前景目标！通常我们把前景目标的灰度值设为255，即白色，背景的灰度值设为0，即黑色。所以定义中的非零像素点即为前景目标，零像素点即为背景。所以图像中前景目标中的像素点距离背景越远，那么距离就越大，如果我们用这个距离值替换像素值，那么新生成的图像中这个点越亮。

#### **基本思想**

根据度量距离的方法不同，距离变换有几种不同的方法，假设像素点p1(x1, y1), 

p2(x2, y2)计算距离的方法常见的有：

\1.   欧几里德距离，Distance =![img](http://static.oschina.net/uploads/img/201607/29174635_zBpQ.jpg)

\2.   曼哈顿距离(City Block Distance)，公式如下：Distance = |x2-x1|+|y2-y1|

\3.   象棋格距离(Chessboard Distance)，公式如下：Distance = max(|x2-x1|,|y2-y1|)

一旦距离度量公式选择，就可以在二值图像的距离变换中使用。一个最常见的距离变换

算法就是通过连续的腐蚀操作来实现，腐蚀操作的停止条件是所有前景像素都被完全

腐蚀。这样根据腐蚀的先后顺序，我们就得到各个前景像素点到前景中心骨架像素点的

距离。根据各个像素点的距离值，设置为不同的灰度值。这样就完成了二值图像的距离

变换。



#### 应用领域：

如果应用到单幅图像上则是主要为 目标细化、骨架提取、粘连物体的分离等；如果应用到原图跟模板图则是应用于图像匹配，如果光照条件不变的条件下，这种可以达到很好的匹配效果。鲁棒性最好的是要使用归一化相关系数匹配方法。
对于像素p(x  ,  y),q(s  ,  t),z(v  ,  w),用D(p  ,  q)来表示像素p  ,  q间的距离，有：
一  像素间距离的定义（D(x  ,  y)应满足的条件）
      1  D(p  ,  q)  ≥  0.（当且仅当p  =  q）;
      2  D(p  ,  q)  =  D(q  ,  p);
      3  D(p  ,  q)  +  D(q  ,  z)  ≥  D(p  ,  z);
二  像素距离的分类及计算方法
      1  欧式距离（Euclidean  Distance）
        (1)相信大家对这个距离公式是非常熟悉的，初中时就学了，也称它为两点间的距离。p和q之间的欧式距离定义如下：
De(p  ,  q)  =            
  (2)距离直观描述：距点(x  ,  y)小于或等于某一值r的欧式距离是中心在(x  ,  y)半径为r的圆平面。
              2  城区距离（City-Block  Distance）
                (1)p和q之间的城区距离定义如下：
D4(p  ,  q)  =  |x  -  s|  +  |y  -  t|
        (2)距离直观描述：距点(x  ,  y)小于或等于某一值r的城区距离是中心在(x  ,  y)对角线为2r的菱形。
    3  棋盘距离（Chess  Board  Distance）
        (1)p和q之间的棋盘距离定义如下：
D8(p  ,  q)  =  max(|x  -  s|  ,  |y  -  t|)
        (2)距离直观描述：距点(x  ,  y)小于或等于某一值r的棋盘距离是中心在(x  ,  y)对角线为2r的正方形。

#### **方法**

首先对图像进行**二值化处理（其要处理成二值图）**，然后给每个像素赋值为离它最近的背景像素点与其距离（Manhattan距离or欧氏距离），得到distance metric(距离矩阵)，那么离边界越远的点越亮。